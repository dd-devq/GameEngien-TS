(()=>{"use strict";class e{static info(e){console.info("[INFO]: "+e)}static warn(e){console.warn("[WARN]: "+e)}static error(e){console.error("[ERROR]: "+e)}}class t{constructor(e,t){this.position=null==t?new w(0,0):t,this.name=e,this.componentMap=new Map,this.isActive=!0,this.isUpdated=!1}update(e){if(this.isActive)for(const[t,s]of this.componentMap)s.update(e)}render(e){if(this.isActive)for(const[t,s]of this.componentMap)s.render(e)}addComponent(t){this.componentMap.has(t.uuid)?e.error("Component is already added!"):this.componentMap.set(t.uuid,t)}setActive(e){this.isActive=e;for(const[t,s]of this.componentMap)s.setActive(e);e?this.onEnabled():this.onDisabled()}onEnabled(){e.info(`Game Object: ${this.name} is enabled!`)}onDisabled(){e.info(`Game Object: ${this.name} is disabled!`)}reset(){this.position.x=0,this.position.y=0}setPosition(e){this.position.x=e.x,this.position.y=e.y}}class s{constructor(e,t){this.width=e,this.height=t}init(){const t=document.getElementById("game");if(null==t)return e.error("Game Element Not Found"),!1;s.canvas=document.createElement("canvas"),s.canvas.id="canvas",s.canvas.height=this.height,s.canvas.width=this.width,s.canvas.setAttribute("style","margin: auto; position: fixed"),t.appendChild(s.canvas);const i=s.canvas.getContext("2d");return null===i?(e.error("Canvas Not Found"),!1):(s.canvasContext=i,e.info("Render Context Initialized!"),!0)}clearContext(){s.canvasContext.clearRect(0,0,this.width,this.height)}drawCanvasContextArea(){s.canvasContext.fillStyle="#f7f7f7",s.canvasContext.fillRect(0,0,this.width,this.height)}toWorldPosition(e){return new w(e.x+this.width/2,-e.y+this.height/2)}isInCanvas(e,t){const s=this.toWorldPosition(e);return!(s.x+t.x<0||s.y+t.y>this.height)}getCanvasHeight(){return this.height}getCanvasWidth(){return this.width}}class i{constructor(t){this.renderContext=new s(t.width,t.height),this.renderContext.init()||e.error("Canvas Rendering Context Not Found"),e.info("Renderer Initialized!")}clear(){this.renderContext.clearContext(),this.renderContext.drawCanvasContextArea()}drawSprite(e,t){const i=this.renderContext.toWorldPosition(t);s.canvasContext.drawImage(e.image,i.x,i.y)}drawRect(e,t,i){const n=this.renderContext.toWorldPosition(e);s.canvasContext.beginPath(),s.canvasContext.lineWidth=.5,s.canvasContext.strokeStyle="green",s.canvasContext.rect(n.x,n.y,t,i),s.canvasContext.stroke()}drawText(e,t){const i=this.renderContext.toWorldPosition(t);s.canvasContext.font="24px Roboto",s.canvasContext.strokeStyle="black",s.canvasContext.strokeText(e,i.x,i.y)}}class n{constructor(){this.keyState={},this.keyHoldState={},this.isClicked=!1,this.isHover=!1,document.addEventListener("keyup",this.handleKeyUp.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("mousemove",this.handleMouseMove.bind(this)),document.addEventListener("mousedown",this.handleMouseDown.bind(this)),document.addEventListener("mouseup",this.handleMouseUp.bind(this)),n.instance=this,e.info("Input Manager Initialized!")}handleMouseMove(e){const t=s.canvas.getBoundingClientRect(),i=e.clientX,n=e.clientY;this.isHover=n>t.top&&n<t.bottom&&i>t.left&&i<t.right}handleMouseDown(e){this.isHover&&(this.isClicked=!0)}handleMouseUp(e){this.isClicked=!1}isMouseClicked(){return this.isClicked}reset(){this.keyState={}}handleKeyUp(e){const t=e.key;this.keyState[t]=!1,this.keyHoldState[t]=!1}handleKeyDown(e){const t=e.key;this.keyState[t]=!0,0==this.keyHoldState[t]&&(this.keyHoldState[t]=!0)}isKeyPressed(e){return this.keyState[e]}isKeyHeld(e){return this.keyHoldState[e]}static getInstance(){return n.instance||(n.instance=new n),n.instance}}class r{constructor(){this.sceneMap=new Map,this.deltaTime=0}initGame(e){this.renderer=new i(e),this.resourceManager=new u,this.inputManager=new n}gameLoop(){A.start(),this.update(),this.render(),A.end(),this.deltaTime=A.getDeltaTime(),this.inputManager.reset(),requestAnimationFrame(this.gameLoop.bind(this))}addScene(t){if(!this.sceneMap.has(t.name))return this.sceneMap.set(t.name,t),void this.setActiveScene(t.name);e.error("Duplicate Scene!")}setActiveScene(t){const s=this.sceneMap.get(t);void 0!==s?this.nowActiveScene=s:e.warn("Unknown Scene!")}getActiveScene(){return this.nowActiveScene}update(){null!==this.nowActiveScene?this.nowActiveScene.update(this.deltaTime):e.warn("No Active Scene!")}render(){this.renderer.clear(),null!=this.nowActiveScene?this.nowActiveScene.render(this.renderer):e.warn("No Active Scene!")}}class a{constructor(e){this.name=e,this.gameObejctMap=new Map}addGameObject(t){this.gameObejctMap.has(t.name)?e.warn("Game Object already exists!"):this.gameObejctMap.set(t.name,t)}update(e){for(const[t,s]of this.gameObejctMap)s.update(e)}render(e){for(const[t,s]of this.gameObejctMap)s.render(e)}}class o{}function h(e,t){return Math.floor(Math.random()*(t-e+1))+e}class c{set Parent(e){this.parent=e}get Parent(){return this.parent}constructor(e){this.uuid=function(e){let t="";for(let e=0;e<8;e++){const e=Math.floor(62*Math.random());t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(e)}return t}(),this.parent=e,this.isActive=!0,this.isDrawable=!0}setActive(e){this.isActive=e,e?this.onEnabled():this.onDisabled()}onEnabled(){e.info(`Component: ${this.uuid} is enabled!`)}onDisabled(){e.info(`Component: ${this.uuid} is disabled!`)}}class d extends c{constructor(e){super(e),this.states=[],this.isDrawable=!1}addState(e){this.states.push(e),1==this.states.length&&(this.currentState=e,this.currentState.onEnter())}gotoState(e){void 0!==this.currentState&&this.currentState.onExit(),this.currentState=e,this.currentState.onEnter()}update(e){void 0!==this.currentState&&this.currentState.onUpdate(e)}render(t){this.isDrawable&&e.warn("FSMSystem is not drawable!")}}class u extends t{constructor(){super("Resource Manager"),this.resourceCache=new Map,e.info("Resource Manager Initialized!")}registerResource(t,s){null==this.resourceCache.get(t)?this.resourceCache.set(t,s):e.warn(`Cached resource: ${t}!`)}loadResource(t){if(void 0!==this.resourceCache.get(t))return this.resourceCache.get(t);e.warn(`Unknown resource: ${t}!`)}}class p{constructor(e,t,s){this.name=e,this.frameRate=t,null!=s&&(this.clip=s),this.currentFrameIndex=0,this.currentFrameTime=0}setClip(e){this.clip=e}getCurrentFrame(){return this.clip[this.currentFrameIndex]}update(e){this.currentFrameTime+=e+.001,this.currentFrameTime>1/this.frameRate&&(this.currentFrameIndex=(this.currentFrameIndex+1)%this.clip.length,this.currentFrameTime=0)}}class g extends c{constructor(e){super(e),this.animationClips=new Map,this.currentAnimation=""}render(e){this.isActive&&this.isDrawable}update(e){var t;this.isActive&&(null===(t=this.animationClips.get(this.currentAnimation))||void 0===t||t.update(e))}play(e){var t;this.currentAnimation!==e&&(this.currentAnimation=e,null===(t=this.animationClips.get(this.currentAnimation))||void 0===t||t.update(0))}registerAnimation(e,t){this.animationClips.set(e,t)}getCurrentFrame(){var e;return null===(e=this.animationClips.get(this.currentAnimation))||void 0===e?void 0:e.getCurrentFrame()}}class l extends c{constructor(e,t){super(e),this.image=new Image,this.image.src=t}update(e){this.isActive}render(e){this.isActive&&this.isDrawable}}class m extends c{constructor(e,t,s){super(e),this.width=t,this.height=s,this.showCollider=!0}render(e){this.showCollider&&this.isDrawable&&e.drawRect(this.parent.position,this.width,this.height)}update(e){this.isActive}checkCollision(e){return this.parent.position.x<e.parent.position.x+e.width&&this.parent.position.x+this.width>e.parent.position.x&&this.parent.position.y<e.parent.position.y+e.height&&this.parent.position.y+this.height>e.parent.position.y}resize(e,t){this.width=e,this.height=t}}class w{constructor(e=0,t=0){this.x=e,this.y=t}scale(e){return new w(this.x*e,this.y*e)}add(e){return new w(this.x+e.x,this.y+e.y)}min(e){return new w(this.x-e.x,this.y-e.y)}div(e){return new w(this.x/e,this.y/e)}normalize(){const e=this.magnitude();return this.div(e)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}reset(){this.x=0,this.y=0}equal(e){this.x=e.x,this.y=e.y}}class S extends c{constructor(e,t){super(e),this.G=-9.8,this.isSimulated=!1,this.mass=t,this.acceleration=new w(0,0),this.velocity=new w(0,0),this.isDrawable=!1}applyGravity(){const e=new w(0,this.G*this.mass*.25);this.applyForce(e)}applyForce(e){const t=e.div(this.mass);this.acceleration.equal(this.acceleration.add(t))}update(e){this.isSimulated&&(this.applyGravity(),this.velocity.equal(this.velocity.add(this.acceleration.scale(e+.05))),this.parent.position.equal(this.parent.position.add(this.velocity)),this.resetAcceleration())}render(t){this.isDrawable&&e.info("Rigid Body is not drawable!")}resetAcceleration(){this.acceleration=new w(0,0)}resetVelocity(){this.velocity=new w(0,0)}}class A{static start(){A.isRunning?e.error("Timer is already active!"):(A.startTime=performance.now(),A.isRunning=!0)}static end(){A.isRunning?(A.endTime=performance.now(),A.isRunning=!1):e.error("No active timer exists!")}static reset(){A.startTime=0,A.endTime=0,A.isRunning=!1}static getDeltaTime(){return(this.endTime-this.startTime)/1e3}}A.startTime=0,A.endTime=0,A.isRunning=!1;class R extends t{constructor(e,t){super(e,t),this.MAX_SPEED=15,this.DEFAULT_SPEED=2.35,this.DEFAULT_POSTION=new w(0,0),this.accelaration=2.65,this.speed=this.DEFAULT_SPEED,this.isIncanvas=!0,void 0!==t&&(this.DEFAULT_POSTION.x=t.x,this.DEFAULT_POSTION.y=t.y),this.boxCollider=new m(this,35,35),this.addComponent(this.boxCollider),this.nowRenderingResource=new l(this,"assets/Enemy/bird1.png"),this.loadResource(this.nowRenderingResource)}loadResource(e){this.imageOffset=new w(this.nowRenderingResource.image.width,this.nowRenderingResource.image.height)}render(e){this.isIncanvas=e.renderContext.isInCanvas(this.position,this.imageOffset),this.isActive&&this.isIncanvas&&e.drawSprite(this.nowRenderingResource,this.position),super.render(e)}update(e){super.update(e),this.isUpdated&&(this.increaseSpeed(e),this.position.x-=this.speed,this.nowRenderingResource=this.birdAnimator.getCurrentFrame())}increaseSpeed(e){this.speed<=this.MAX_SPEED?this.speed+=e*this.accelaration:this.speed=this.MAX_SPEED}reset(){this.isUpdated=!1,this.position.equal(this.DEFAULT_POSTION),this.speed=this.DEFAULT_SPEED}respawn(){this.position.equal(this.DEFAULT_POSTION)}}var v;!function(e){e[e.READY=0]="READY",e[e.GAMEPLAY=1]="GAMEPLAY",e[e.GAMEOVER=2]="GAMEOVER"}(v||(v={}));class M extends t{constructor(e){super(e),this.clouds=[],this.currentObstacle=[],this.gameState=v.READY}update(t){switch(this.gameState){case v.READY:if(n.getInstance().isKeyPressed(" ")){this.gameState=v.GAMEPLAY,this.ground1.isUpdated=!0,this.ground2.isUpdated=!0;for(const e of this.clouds)e.isUpdated=!0;for(const e of this.currentObstacle)e.isUpdated=!0;this.dino.isUpdated=!0,this.enemy.isUpdated=!0,this.score.isUpdated=!0,this.highScore.setActive(!1)}break;case v.GAMEPLAY:this.updateGameplay(t);break;case v.GAMEOVER:if(n.getInstance().isKeyPressed(" ")||n.getInstance().isMouseClicked()){this.ground1.reset(),this.ground2.reset();for(const e of this.clouds)e.reset();for(const e of this.currentObstacle)e.reset();this.gameState=v.READY,this.enemy.reset(),this.score.reset(),this.replayButton.setActive(!1)}break;default:e.warn("Unknow Game State!")}}updateGameplay(e){this.ground1.isIncanvas||this.ground1.setPosition(new w(this.ground2.position.x+this.ground1.imageOffset.x,this.ground1.position.y)),this.ground2.isIncanvas||this.ground2.setPosition(new w(this.ground1.position.x+this.ground2.imageOffset.x,this.ground2.position.y));for(const e of this.currentObstacle)if(e.isIncanvas)this.dino.boxCollider.checkCollision(e.boxCollider)&&(this.stopUpdate(),this.gameState=v.GAMEOVER);else{e.respawn();const t=h(0,1),s=h(1,6);let i,n="";t?(n="smallCactus"+s.toString(),e.position.y-=10):n="cactus"+s.toString(),i=this.resourceManager.loadResource(n),e.loadResource(i)}this.enemy.boxCollider.checkCollision(this.dino.boxCollider)&&(this.stopUpdate(),this.gameState=v.GAMEOVER),this.enemy.isIncanvas||this.enemy.respawn()}stopUpdate(){this.ground1.isUpdated=!1,this.ground2.isUpdated=!1;for(const e of this.clouds)e.isUpdated=!1;for(const e of this.currentObstacle)e.isUpdated=!1;this.enemy.isUpdated=!1,this.dino.isDead=!0,this.score.isUpdated=!1,this.highScore.setActive(!0),this.highScore.score<this.score.score&&(this.highScore.score=this.score.score),this.replayButton.setActive(!0)}render(e){super.render(e)}}class E extends t{constructor(e,t){super(e,t),this.MAX_SPEED=15,this.DEFAULT_SPEED=2.25,this.DEFAULT_POSTION=new w(0,0),this.accelaration=2.5,this.speed=this.DEFAULT_SPEED,this.isIncanvas=!0,void 0!==t&&(this.DEFAULT_POSTION.x=t.x,this.DEFAULT_POSTION.y=t.y)}loadResource(e){this.nowRenderingResource=e,this.imageOffset=new w(this.nowRenderingResource.image.width,this.nowRenderingResource.image.height)}render(e){this.isIncanvas=e.renderContext.isInCanvas(this.position,this.imageOffset),this.isActive&&this.isIncanvas&&e.drawSprite(this.nowRenderingResource,this.position),super.render(e)}update(e){this.isUpdated&&(this.increaseSpeed(e),this.position.x-=this.speed)}increaseSpeed(e){this.speed<=this.MAX_SPEED?this.speed+=e*this.accelaration:this.speed=this.MAX_SPEED}reset(){this.isUpdated=!1,this.position.equal(this.DEFAULT_POSTION),this.speed=this.DEFAULT_SPEED}respawn(){this.position.equal(this.DEFAULT_POSTION)}}class y extends t{constructor(e,t){super(e,t),this.DEFAULT_POSITION=new w,this.maxHeight=25,this.isDead=!1,void 0!==t&&(this.DEFAULT_POSITION.equal(t),this.rigidBody=new S(this,1))}init(){this.boxCollider=new m(this,40,50),this.addComponent(this.boxCollider),this.nowRenderingResource=new l(this,"assets\\Dino\\dinoIdle.png"),this.addComponent(this.rigidBody),this.dinoFSMSystem=new I(this),this.addComponent(this.dinoFSMSystem)}update(e){this.isUpdated&&super.update(e),this.isDead&&this.dinoFSMSystem.update(e),this.nowRenderingResource=this.dinoAnimator.getCurrentFrame()}render(e){this.isActive&&this.nowRenderingResource instanceof l&&e.drawSprite(this.nowRenderingResource,this.position),super.render(e)}reset(){this.isUpdated=!1,this.position.equal(this.DEFAULT_POSITION),this.nowRenderingResource=this.dinoAnimator.getCurrentFrame()}}class I extends d{set Parent(e){this.parent=e}get Parent(){return this.parent}constructor(e){super(e),this.readyState=new O,this.jumpingState=new C,this.deadState=new P,this.crouchingState=new x,this.runningState=new D,this.readyState.parent=this,this.jumpingState.parent=this,this.deadState.parent=this,this.crouchingState.parent=this,this.runningState.parent=this,this.addState(this.readyState),this.addState(this.jumpingState),this.addState(this.deadState),this.addState(this.crouchingState),this.addState(this.runningState)}}class C extends o{constructor(){super(...arguments),this.jumpForce=105}onEnter(){this.falling=!1,this.jumpInProgress=!0,this.parent.Parent.dinoAnimator.play("Jump"),this.parent.Parent.rigidBody.resetVelocity(),this.parent.Parent.rigidBody.isSimulated=!0,this.jump()}onExit(){this.jumpInProgress=!1,this.falling=!1,this.parent.Parent.rigidBody.resetVelocity(),this.parent.Parent.rigidBody.isSimulated=!1,this.parent.Parent.rigidBody.G=-9.8}onUpdate(e){this.jumpInProgress&&n.getInstance().isKeyPressed("ArrowDown")&&(this.parent.Parent.rigidBody.G*=5,this.falling=!0),this.jumpInProgress&&!this.falling?this.parent.Parent.position.y>=this.parent.Parent.maxHeight&&(this.falling=!0):this.parent.Parent.position.y<=this.parent.Parent.DEFAULT_POSITION.y&&(this.parent.Parent.position.equal(this.parent.Parent.DEFAULT_POSITION),this.parent.gotoState(this.parent.runningState)),this.parent.Parent.isDead&&this.parent.gotoState(this.parent.deadState)}jump(){this.parent.Parent.rigidBody.applyForce(new w(0,this.jumpForce))}}class D extends o{onEnter(){this.parent.Parent.dinoAnimator.play("Run")}onExit(){}onUpdate(e){this.parent.Parent.position.y<=this.parent.Parent.DEFAULT_POSITION.y&&this.parent.Parent.position.equal(this.parent.Parent.DEFAULT_POSITION),n.getInstance().isKeyPressed("ArrowDown")||n.getInstance().isKeyHeld("ArrowDown")?this.parent.gotoState(this.parent.crouchingState):(n.getInstance().isKeyPressed(" ")||n.getInstance().isKeyHeld(" "))&&this.parent.gotoState(this.parent.jumpingState),this.parent.Parent.isDead&&this.parent.gotoState(this.parent.deadState)}}class x extends o{constructor(){super(...arguments),this.crouchOffset=20}onEnter(){this.parent.Parent.dinoAnimator.play("Crouch"),this.parent.Parent.DEFAULT_POSITION.y-=this.crouchOffset,this.parent.Parent.position.equal(this.parent.Parent.DEFAULT_POSITION)}onExit(){this.parent.Parent.DEFAULT_POSITION.y+=this.crouchOffset,this.parent.Parent.position.y=this.parent.Parent.DEFAULT_POSITION.y}onUpdate(e){this.parent.Parent.position.y<=this.parent.Parent.DEFAULT_POSITION.y&&this.parent.Parent.position.equal(this.parent.Parent.DEFAULT_POSITION),n.getInstance().isKeyPressed("ArrowDown")||n.getInstance().isKeyHeld("ArrowDown")?this.parent.gotoState(this.parent.crouchingState):this.parent.gotoState(this.parent.runningState),this.parent.Parent.isDead&&this.parent.gotoState(this.parent.deadState)}}class P extends o{onEnter(){this.parent.Parent.dinoAnimator.play("Dead"),this.parent.Parent.isUpdated=!1}onExit(){this.parent.Parent.isDead=!1}onUpdate(e){(n.getInstance().isKeyPressed(" ")||n.getInstance().isMouseClicked())&&this.parent.gotoState(this.parent.readyState)}}class O extends o{onEnter(){this.parent.Parent.dinoAnimator.play("Idle"),this.parent.Parent.reset()}onExit(){this.parent.Parent.isUpdated=!0}onUpdate(e){n.getInstance().isKeyPressed(" ")&&this.parent.gotoState(this.parent.runningState)}}class T extends t{constructor(e,t){super(e,t),this.MAX_SPEED=15,this.DEFAULT_SPEED=2,this.DEFAULT_POSTION=new w(0,0),this.MAX_HEIGHT=100,this.MIN_HEIGHT=-50,this.MAX_DISTANCE=500,this.MIN_DISTANCE=400,this.accelaration=2.5,this.speed=this.DEFAULT_SPEED,this.isIncanvas=!1,void 0!==t&&(this.DEFAULT_POSTION.x=t.x,this.DEFAULT_POSTION.y=t.y)}loadResource(e){this.nowRenderingResource=e,this.imageOffset=new w(this.nowRenderingResource.image.width,this.nowRenderingResource.image.height)}render(e){this.isIncanvas=e.renderContext.isInCanvas(this.position,this.imageOffset),this.isActive&&this.isIncanvas&&e.drawSprite(this.nowRenderingResource,this.position),super.render(e)}update(e){this.isUpdated&&(this.increaseSpeed(e),this.position.x-=this.speed),this.isIncanvas||this.respawn()}increaseSpeed(e){this.speed<=this.MAX_SPEED?this.speed+=e*this.accelaration:this.speed=this.MAX_SPEED}reset(){this.isUpdated=!1,this.position.equal(this.DEFAULT_POSTION),this.speed=this.DEFAULT_SPEED}respawn(){const e=h(this.MIN_HEIGHT,this.MAX_HEIGHT),t=this.DEFAULT_POSTION.x+h(this.MIN_DISTANCE,this.MAX_DISTANCE);this.position.equal(new w(t,e))}}class U extends t{constructor(e,t){super(e,t),this.MAX_SPEED=15,this.DEFAULT_SPEED=2.25,this.DEFAULT_POSTION=new w(0,0),this.accelaration=2.5,this.speed=this.DEFAULT_SPEED,this.isIncanvas=!0,void 0!==t&&(this.DEFAULT_POSTION.x=t.x,this.DEFAULT_POSTION.y=t.y,this.boxCollider=new m(this,25,50),this.addComponent(this.boxCollider))}loadResource(e){this.nowRenderingResource=e,this.imageOffset=new w(this.nowRenderingResource.image.width,this.nowRenderingResource.image.height),this.boxCollider.resize(this.imageOffset.x,this.imageOffset.y)}render(e){this.isIncanvas=e.renderContext.isInCanvas(this.position,this.imageOffset),this.isActive&&this.isIncanvas&&e.drawSprite(this.nowRenderingResource,this.position),super.render(e)}update(e){this.isUpdated&&(this.increaseSpeed(e),this.position.x-=this.speed)}increaseSpeed(e){this.speed<=this.MAX_SPEED?this.speed+=e*this.accelaration:this.speed=this.MAX_SPEED}reset(){this.isUpdated=!1,this.position.equal(this.DEFAULT_POSTION),this.speed=this.DEFAULT_SPEED}respawn(){this.position.equal(this.DEFAULT_POSTION)}}class f extends t{constructor(e,t){super(e,t),this.score=0,this.stringScore="",this.factor=200,this.FACTOR=2e3,this.accumulate=0,this.stringScore=this.convertStringScore(this.score)}convertStringScore(e){let t=e.toString();for(let e=t.length;e<5;e++)t="0"+t;return t}update(e){this.isUpdated&&(this.increaseFactor(),this.accumulate+=this.factor*e,this.accumulate>1&&(this.score+=Math.round(this.accumulate),this.accumulate=0))}increaseFactor(){this.factor<this.FACTOR?this.factor+=.2:this.factor=this.FACTOR}render(e){this.isActive&&(this.stringScore=this.convertStringScore(this.score),e.drawText(this.stringScore,this.position)),super.render(e)}reset(){this.score=0,this.isUpdated=!1}}class F extends t{constructor(e,t){super(e,t),this.isActive=!1}loadResource(e){this.nowRenderingResource=e;const t=new w(this.nowRenderingResource.image.width,this.nowRenderingResource.image.height);this.width=t.x,this.height=t.y}render(e){super.render(e),this.isActive&&e.drawSprite(this.nowRenderingResource,this.position)}update(e){this.isUpdated&&super.update(e)}}class b extends r{constructor(e){super();const t=new a("Default");this.addScene(t),this.initGame(e),this.gameLoop()}initGame(e){super.initGame(e);const t=new M("Dino Game Manager");this.nowActiveScene.addGameObject(t),this.loadResource(),t.resourceManager=this.resourceManager,this.setupGameObject(t)}gameLoop(){super.gameLoop()}loadResource(){const e=new l(this.resourceManager,"assets/Dino/dinoIdle.png");this.resourceManager.registerResource("dinoIdle",e);const t=new l(this.resourceManager,"assets/Dino/dinoJump.png");this.resourceManager.registerResource("dinoJump",t);const s=new l(this.resourceManager,"assets/Dino/dinoDead.png");this.resourceManager.registerResource("dinoDead",s);const i=new l(this.resourceManager,"assets/Dino/dinoRunFrame1.png");this.resourceManager.registerResource("dinoRunFrame1",i);const n=new l(this.resourceManager,"assets/Dino/dinoRunFrame2.png");this.resourceManager.registerResource("dinoRunFrame2",n);const r=new l(this.resourceManager,"assets/Dino/dinoCrouchFrame1.png");this.resourceManager.registerResource("dinoCrouchFrame1",r);const a=new l(this.resourceManager,"assets/Dino/dinoCrouchFrame2.png");this.resourceManager.registerResource("dinoCrouchFrame2",a);const o=new l(this.resourceManager,"assets/Enemy/bird1.png");this.resourceManager.registerResource("bird1",o);const h=new l(this.resourceManager,"assets/Enemy/bird2.png");this.resourceManager.registerResource("bird2",h);const c=new l(this.resourceManager,"assets/Env/ground.png");this.resourceManager.registerResource("ground",c);const d=new l(this.resourceManager,"assets/Env/cloud.png");this.resourceManager.registerResource("cloud",d);const u=new l(this.resourceManager,"assets/Env/cactus1.png");this.resourceManager.registerResource("cactus1",u);const p=new l(this.resourceManager,"assets/Env/cactus2.png");this.resourceManager.registerResource("cactus2",p);const g=new l(this.resourceManager,"assets/Env/cactus3.png");this.resourceManager.registerResource("cactus3",g);const m=new l(this.resourceManager,"assets/Env/cactus4.png");this.resourceManager.registerResource("cactus4",m);const w=new l(this.resourceManager,"assets/Env/cactus5.png");this.resourceManager.registerResource("cactus5",w);const S=new l(this.resourceManager,"assets/Env/cactus6.png");this.resourceManager.registerResource("cactus6",S);const A=new l(this.resourceManager,"assets/Env/smallCactus1.png");this.resourceManager.registerResource("smallCactus1",A);const R=new l(this.resourceManager,"assets/Env/smallCactus2.png");this.resourceManager.registerResource("smallCactus2",R);const v=new l(this.resourceManager,"assets/Env/smallCactus3.png");this.resourceManager.registerResource("smallCactus3",v);const M=new l(this.resourceManager,"assets/Env/smallCactus4.png");this.resourceManager.registerResource("smallCactus4",M);const E=new l(this.resourceManager,"assets/Env/smallCactus5.png");this.resourceManager.registerResource("smallCactus5",E);const y=new l(this.resourceManager,"assets/Env/smallCactus6.png");this.resourceManager.registerResource("smallCactus6",y);const I=new l(this.resourceManager,"assets/UI/0.png");this.resourceManager.registerResource("digit0",I);const C=new l(this.resourceManager,"assets/UI/1.png");this.resourceManager.registerResource("digit1",C);const D=new l(this.resourceManager,"assets/UI/2.png");this.resourceManager.registerResource("digit2",D);const x=new l(this.resourceManager,"assets/UI/3.png");this.resourceManager.registerResource("digit3",x);const P=new l(this.resourceManager,"assets/UI/4.png");this.resourceManager.registerResource("digit4",P);const O=new l(this.resourceManager,"assets/UI/5.png");this.resourceManager.registerResource("digit5",O);const T=new l(this.resourceManager,"assets/UI/6.png");this.resourceManager.registerResource("digit6",T);const U=new l(this.resourceManager,"assets/UI/7.png");this.resourceManager.registerResource("digit7",U);const f=new l(this.resourceManager,"assets/UI/6.png");this.resourceManager.registerResource("digit8",f);const F=new l(this.resourceManager,"assets/UI/9.png");this.resourceManager.registerResource("digit9",F);const b=new l(this.resourceManager,"assets/UI/h.png");this.resourceManager.registerResource("charH",b);const _=new l(this.resourceManager,"assets/UI/i.png");this.resourceManager.registerResource("charI",_);const L=new l(this.resourceManager,"assets/UI/gameOver.png");this.resourceManager.registerResource("gameOver",L);const G=new l(this.resourceManager,"assets/UI/replay.png");this.resourceManager.registerResource("replay",G)}setupGameObject(e){this.setupEnvironment(e),this.setupDino(e),this.setupCactus(e),this.setupBird(e),this.setupScore(e),this.setupUI(e)}setupEnvironment(e){const t=this.resourceManager.loadResource("ground"),s=new E("ground1",new w(-600,-75)),i=new E("ground2",new w(1800,-75));void 0!==t&&(s.loadResource(t),i.loadResource(t)),this.nowActiveScene.addGameObject(s),this.nowActiveScene.addGameObject(i),e.ground1=s,e.ground2=i;const n=this.resourceManager.loadResource("cloud"),r=new T("cloud1",new w(700,-25)),a=new T("cloud2",new w(1e3,-0)),o=new T("cloud3",new w(1200,25)),h=new T("cloud4",new w(1500,75));void 0!==n&&(r.loadResource(n),a.loadResource(n),o.loadResource(n),h.loadResource(n)),this.nowActiveScene.addGameObject(r),this.nowActiveScene.addGameObject(a),this.nowActiveScene.addGameObject(o),this.nowActiveScene.addGameObject(h),e.clouds.push(r),e.clouds.push(a),e.clouds.push(o),e.clouds.push(h)}setupBird(e){const t=new R("Bird",new w(1600,-10)),s=new g(t);t.birdAnimator=s,t.addComponent(s);const i=new p("Fly",60),n=[this.resourceManager.loadResource("bird1"),this.resourceManager.loadResource("bird2")];i.setClip(n),s.registerAnimation("Fly",i),s.play("Fly"),this.nowActiveScene.addGameObject(t),e.enemy=t}setupCactus(e){const t=this.resourceManager.loadResource("cactus1"),s=new U("Cactus1",new w(700,-42.5)),i=new U("Cactus2",new w(1200,-42.5));void 0!==t&&(s.loadResource(t),i.loadResource(t)),this.nowActiveScene.addGameObject(s),this.nowActiveScene.addGameObject(i),e.currentObstacle.push(s),e.currentObstacle.push(i)}setupScore(e){const t=new f("Game Score",new w(525,100)),s=new f("High Score",new w(450,100));e.score=t,e.highScore=s,this.nowActiveScene.addGameObject(s),this.nowActiveScene.addGameObject(t)}setupUI(e){const t=new F("Replay",new w),s=this.resourceManager.loadResource("replay");void 0!==s&&t.loadResource(s),e.replayButton=t,this.nowActiveScene.addGameObject(t)}setupDino(e){const t=new y("Dino",new w(-500,-40)),s=new g(t);t.dinoAnimator=s,t.addComponent(s);const i=new p("Idle",60),n=new p("Dead",60),r=new p("Jump",60),a=new p("Run",60),o=new p("Crouch",60),h=[this.resourceManager.loadResource("dinoIdle")],c=[this.resourceManager.loadResource("dinoDead")],d=[this.resourceManager.loadResource("dinoJump")],u=[this.resourceManager.loadResource("dinoRunFrame1"),this.resourceManager.loadResource("dinoRunFrame2")],l=[this.resourceManager.loadResource("dinoCrouchFrame1"),this.resourceManager.loadResource("dinoCrouchFrame2")];i.setClip(h),n.setClip(c),r.setClip(d),a.setClip(u),o.setClip(l),s.registerAnimation("Idle",i),s.registerAnimation("Dead",n),s.registerAnimation("Jump",r),s.registerAnimation("Run",a),s.registerAnimation("Crouch",o),s.play("Idle"),t.init(),this.nowActiveScene.addGameObject(t),e.dino=t}}const _={width:1200,height:250};window.onload=()=>{new b(_)}})();